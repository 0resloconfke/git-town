#!/bin/bash -e
source "$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )/helpers/helpers.sh"

echo_intro "SYNCING THE CURRENT BRANCH"

stash_open_changes
if [ "$current_branch_name" = "$main_branch_name" ]; then
  # On the main branch
  pull_main_branch
  push_main_branch
else
  # On a feature branch
  pull_feature_branch
  pull_main_branch
  update_feature_branch
  push_feature_branch 'force'
fi
restore_open_changes

echo_all_done

